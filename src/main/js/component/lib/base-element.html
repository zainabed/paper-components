<script>

/**
 * @module element
 * @name BaseElement
 *
 * @description
 * Base class for all custom component.
 * It exteds the HTMLElement to create basic feature of custom element.
 *
 */
class BaseElement extends HTMLElement {

  constructor() {
    super();
    this.shadow = this.createShadowRoot();
    this.currentDocument = null;
    this.template = null;
  }

  connectedCallback() {
    this.currentDocument = document.currentScript.ownerDocument;
    this.buildComponent();
    this.registerEvents();
  }

  buildComponent() {
    this.template = this.loadTemplateContent(this.templateId + '-tpl');
    var style = this.loadTemplateContent(this.templateId + '-style');
    this.shadow.appendChild(style);
    this.shadow.appendChild(this.template);
  }

  importTemplate(templateId) {
    var template = this.currentDocument.querySelector('#' + templateId);
    if (template == null) {
      //throw new Exception(templateId + ' Template not found.');
    }
    return template.import;
  }

  loadTemplateContent(templateId) {
    var templateBody = this.importTemplate(templateId);
    var template = templateBody.querySelector('template');
    if (template) {
      //throw exception
    }
    return document.importNode(template.content, true);
  }

  registerEvents(){
    this.addEventListener('click', this.onClick);
  }

  onClick(){
    console.log('clicked');
  }
}
</script>
